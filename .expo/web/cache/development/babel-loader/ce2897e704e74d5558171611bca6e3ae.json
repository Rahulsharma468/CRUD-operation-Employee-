{"ast":null,"code":"import firebase from 'firebase';\nimport { Actions } from 'react-native-router-flux';\nimport { EMPLOYEE_UPDATE, EMPLOYEE_CREATE, EMPLOYEES_FETCH_SUCCESS, EMPLOYEE_SAVE_SUCCESS } from \"./types\";\nexport var employeeUpdate = function employeeUpdate(_ref) {\n  var prop = _ref.prop,\n      value = _ref.value;\n  return {\n    type: EMPLOYEE_UPDATE,\n    payload: {\n      prop: prop,\n      value: value\n    }\n  };\n};\nexport var employeeCreate = function employeeCreate(_ref2) {\n  var name = _ref2.name,\n      phone = _ref2.phone,\n      shift = _ref2.shift;\n\n  var _firebase$auth = firebase.auth(),\n      currentUser = _firebase$auth.currentUser;\n\n  return function (dispatch) {\n    firebase.database().ref(\"/users/\" + currentUser.uid + \"/employees\").push({\n      name: name,\n      phone: phone,\n      shift: shift\n    }).then(function () {\n      dispatch({\n        type: EMPLOYEE_CREATE\n      });\n      Actions.pop();\n    });\n  };\n};\nexport var employeesFetch = function employeesFetch() {\n  var _firebase$auth2 = firebase.auth(),\n      currentUser = _firebase$auth2.currentUser;\n\n  return function (dispatch) {\n    firebase.database().ref(\"/users/\" + currentUser.uid + \"/employees\").on('value', function (snapshot) {\n      dispatch({\n        type: EMPLOYEES_FETCH_SUCCESS,\n        payload: snapshot.val()\n      });\n    });\n  };\n};\nexport var employeeSave = function employeeSave(_ref3) {\n  var name = _ref3.name,\n      phone = _ref3.phone,\n      shift = _ref3.shift,\n      uid = _ref3.uid;\n\n  var _firebase$auth3 = firebase.auth(),\n      currentUser = _firebase$auth3.currentUser;\n\n  return function (dispatch) {\n    firebase.database().ref(\"/users/\" + currentUser.uid + \"/employees/\" + uid).set({\n      name: name,\n      phone: phone,\n      shift: shift\n    }).then(function () {\n      dispatch({\n        type: EMPLOYEE_SAVE_SUCCESS\n      });\n      Actions.employeeList({\n        type: 'reset'\n      });\n    });\n  };\n};\nexport var employeeDelete = function employeeDelete(_ref4) {\n  var uid = _ref4.uid;\n\n  var _firebase$auth4 = firebase.auth(),\n      currentUser = _firebase$auth4.currentUser;\n\n  return function () {\n    firebase.database().ref(\"/users/\" + currentUser.uid + \"/employees/\" + uid).remove().then(function () {\n      Actions.pop();\n    });\n  };\n};","map":{"version":3,"sources":["/home/tanjiro255/Desktop/React/manager/src/actions/EmployeeActions.js"],"names":["firebase","Actions","EMPLOYEE_UPDATE","EMPLOYEE_CREATE","EMPLOYEES_FETCH_SUCCESS","EMPLOYEE_SAVE_SUCCESS","employeeUpdate","prop","value","type","payload","employeeCreate","name","phone","shift","auth","currentUser","dispatch","database","ref","uid","push","then","pop","employeesFetch","on","snapshot","val","employeeSave","set","employeeList","employeeDelete","remove"],"mappings":"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","sourcesContent":["import firebase from 'firebase';\nimport { Actions } from 'react-native-router-flux';\n\nimport {\n  EMPLOYEE_UPDATE,\n  EMPLOYEE_CREATE,\n  EMPLOYEES_FETCH_SUCCESS,\n  EMPLOYEE_SAVE_SUCCESS\n} from './types';\n\nexport const employeeUpdate = ({ prop, value }) => {\n  return {\n    type: EMPLOYEE_UPDATE,\n    payload: { prop, value }\n  };\n};\n\nexport const employeeCreate = ({ name, phone, shift }) => {\n  // console.log(name, phone, shift);\n  const { currentUser } = firebase.auth();\n\n  // this arrow func is just to get passed the redux thunk requirement\n  return dispatch => {\n    firebase\n      .database()\n      .ref(`/users/${currentUser.uid}/employees`)\n      .push({ name, phone, shift })\n      //redirect to employee list\n      .then(() => {\n        dispatch({ type: EMPLOYEE_CREATE });\n        Actions.pop();\n      });\n  };\n};\n\nexport const employeesFetch = () => {\n  const { currentUser } = firebase.auth();\n\n  return dispatch => {\n    firebase\n      .database()\n      .ref(`/users/${currentUser.uid}/employees`)\n      // snapshot: object that describes the data (its not the actual object)\n      .on('value', snapshot => {\n        dispatch({ type: EMPLOYEES_FETCH_SUCCESS, payload: snapshot.val() });\n      });\n  };\n};\n\nexport const employeeSave = ({ name, phone, shift, uid }) => {\n  const { currentUser } = firebase.auth();\n\n  return dispatch => {\n    firebase\n      .database()\n      .ref(`/users/${currentUser.uid}/employees/${uid}`)\n      .set({ name, phone, shift })\n      .then(() => {\n        dispatch({ type: EMPLOYEE_SAVE_SUCCESS });\n        Actions.employeeList({type: 'reset'});\n      });\n  };\n};\n\nexport const employeeDelete = ({ uid }) => {\n  const { currentUser } = firebase.auth();\n\n  return () => {\n    firebase\n      .database()\n      .ref(`/users/${currentUser.uid}/employees/${uid}`)\n      .remove()\n      .then(() => {\n        Actions.pop();\n      });\n  };\n};\n"]},"metadata":{},"sourceType":"module"}